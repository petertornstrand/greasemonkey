// ==UserScript==
// @name	    Codebase: Global improvements
// @namespace   https://www.happiness.se
// @version     9
// @grant       GM_addStyle
// @match	    https://code.happiness.se/*
// @match	    https://happiness.codebasehq.com/*
// ==/UserScript==

// @todo Add the global search to the same location as in project context?

/**
 * Change header background color.
 */
function headerLogoAndBackground() {
    GM_addStyle(`
    .site-header { background-color: #150547; }
    .site-header__organisation {
        margin: 0;
	    padding: 0;
    }
    .site-header__organisation a {
        display: block;
        height: 36px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="225.47" height="66.22"><path fill="%23fff" d="M0 0h7.37v18.34h.14c1.52-2.31 3.54-3.97 6.94-3.97 3.69 0 7.59 2.38 7.59 8.95v28.09h-7.37V26.06c0-2.67-1.3-4.33-3.61-4.33-2.75 0-3.69 1.81-3.69 5.06v24.63H0V0zm42.06 47.66h-.14c-1.95 2.67-3.54 4.19-7.08 4.19-3.4 0-7.95-1.66-7.95-9.75 0-8.38 2.38-12.42 11.64-12.42 1.01 0 2.02.15 3.54.22v-3.83c0-2.45-.94-4.33-3.68-4.33-1.88 0-3.76 1.3-4.19 3.68h-7.16c.22-3.25 1.37-5.99 3.33-7.94s4.7-3.1 8.02-3.1c6.14 0 11.06 3.9 11.06 11.56v25.49h-7.37l-.02-3.77zm0-11.99c-.79-.14-1.37-.22-2.02-.22-3.18 0-5.78 1.3-5.78 5.2 0 2.82 1.44 4.69 3.83 4.69 2.46 0 3.98-1.73 3.98-4.69v-4.98zm12.79-20.86h7.37v3.32c1.88-2.1 3.32-3.75 7.01-3.75 2.96 0 5.13 1.08 6.43 3.47.87 1.59 1.23 3.83 1.23 7.87v13.94c0 5.27-.22 7.37-1.16 8.88-1.23 1.95-3.03 3.32-6.57 3.32-2.89 0-5.2-1.37-6.79-3.76h-.15v18.13h-7.37V14.81zm14.67 11.91c0-2.96-1.08-4.98-3.61-4.98-2.24 0-3.69 1.88-3.69 4.55v14.23c0 2.31 1.59 3.97 3.69 3.97 2.82 0 3.61-2.02 3.61-4.33V26.72zm13.44-11.91h7.37v3.32c1.88-2.1 3.32-3.75 7.01-3.75 2.96 0 5.13 1.08 6.43 3.47.87 1.59 1.23 3.83 1.23 7.87v13.94c0 5.27-.22 7.37-1.16 8.88-1.23 1.95-3.04 3.32-6.58 3.32-2.89 0-5.2-1.37-6.79-3.76h-.14v18.13h-7.37V14.81zm14.67 11.91c0-2.96-1.08-4.98-3.61-4.98-2.24 0-3.69 1.88-3.69 4.55v14.23c0 2.31 1.59 3.97 3.69 3.97 2.82 0 3.61-2.02 3.61-4.33V26.72zM111.07 0h7.38v7.37h-7.37V0zm0 14.81h7.38v36.61h-7.37V14.81zm13.44 0h7.37v3.54h.14c1.52-2.31 3.54-3.97 6.94-3.97 3.69 0 7.59 2.38 7.59 8.96v28.09h-7.37V26.07c0-2.67-1.3-4.33-3.62-4.33-2.74 0-3.68 1.81-3.68 5.06v24.63h-7.37V14.81zm34.84 21.08v4.98c0 2.31 1.37 3.61 3.61 3.61 2.82 0 3.47-2.09 3.61-3.68h7.37c0 3.03-1.08 5.85-2.96 7.8-1.95 2.02-4.62 3.25-8.02 3.25-4.48 0-7.88-2.1-9.61-5.27-1.01-1.88-1.37-4.48-1.37-7.44V27.08c0-2.96.36-5.56 1.37-7.44 1.74-3.18 5.13-5.27 9.61-5.27 6.8 0 10.99 4.98 10.99 11.41v10.11h-14.6zm0-5.77h7.23v-4.19c0-2.74-1.37-4.19-3.61-4.19-2.24 0-3.61 1.44-3.61 4.19v4.19h-.01zm33.38-5.06c-.07-2.46-1.8-3.75-3.76-3.75-2.31 0-3.61 1.81-3.61 3.68 0 1.37.36 2.67 3.11 3.76l4.34 1.73c5.49 2.1 7.23 5.99 7.23 10.33 0 6.06-4.62 11.05-10.98 11.05-5.78 0-10.69-3.83-10.98-11.05H185c.29 2.02 1.23 4.12 3.97 4.12 2.1 0 4.12-1.52 4.12-3.97 0-2.02-.87-3.4-3.69-4.48l-3.54-1.3c-4.63-1.73-7.44-5.2-7.44-10.11 0-6.21 4.92-10.69 10.84-10.69 6 0 10.34 4.62 10.41 10.69l-6.94-.01zm25.44 0c-.07-2.46-1.8-3.75-3.76-3.75-2.31 0-3.61 1.81-3.61 3.68 0 1.37.36 2.67 3.11 3.76l4.34 1.73c5.49 2.1 7.23 5.99 7.23 10.33 0 6.06-4.62 11.05-10.98 11.05-5.78 0-10.69-3.83-10.98-11.05h6.94c.29 2.02 1.23 4.12 3.98 4.12 2.1 0 4.12-1.52 4.12-3.97 0-2.02-.87-3.4-3.69-4.48l-3.54-1.3c-4.63-1.73-7.44-5.2-7.44-10.11 0-6.21 4.92-10.69 10.84-10.69 6 0 10.34 4.62 10.41 10.69l-6.97-.01z"/></svg>');
        background-repeat: no-repeat;
        background-size: auto 36px;
        text-indent: -999em;
    }
	#content .right {
		position: sticky;
		top: 0;
	}
	.styled-content__heading { margin-top: 35px; }
	.styled-content__heading:first-child { margin-top: 0; }
	`);
}

/**
 * Entry point for script.
 */
async function main() {
    headerLogoAndBackground();
}

// Run it.
main();
